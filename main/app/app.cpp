#include "app.h"

const char lottiedata[] = "{\"v\":\"4.8.0\",\"meta\":{\"g\":\"LottieFilesAE\",\"a\":\"\",\"k\":\"\",\"d\":\"\",\"tc\":\"\"},\"fr\":30,\"ip\":0,\"op\":91,\"w\":1080,\"h\":1080,\"nm\":\"Youtube\",\"ddd\":0,\"assets\":[],\"layers\":[{\"ddd\":0,\"ind\":1,\"ty\":4,\"nm\":\"Body3\",\"td\":1,\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":100,\"ix\":11},\"r\":{\"a\":0,\"k\":0,\"ix\":10},\"p\":{\"a\":0,\"k\":[537.185,540.714,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[446.493,310.75,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100,100],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[31.586,82.069],[31.25,11.224],[149.785,-16.119],[19.007,-22.353],[-28.863,-79.403],[-32.795,-10.753],[-55.849,29.309],[-9.987,21.439]],\"o\":[[-12.072,-31.3],[-53.362,-19.224],[-29.132,3.13],[-55.574,65.434],[11.842,32.508],[73.508,24.235],[20.698,-10.847],[36.867,-79.072]],\"v\":[[413.563,-225.974],[348.059,-288.974],[-318.079,-294.381],[-390.669,-255.819],[-408.84,221.141],[-342.132,285.905],[362.413,281.191],[409.376,233.773]],\"c\":true},\"ix\":2},\"nm\":\"Path1\",\"mn\":\"ADBEVectorShape-Group\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,0.156999999402,0.128999986836,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill1\",\"mn\":\"ADBEVectorGraphic-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[446.493,310.751],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group1\",\"np\":2,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBEVectorGroup\",\"hd\":false}],\"ip\":0,\"op\":92,\"st\":-36,\"bm\":0},{\"ddd\":0,\"ind\":2,\"ty\":4,\"nm\":\"Pause3\",\"parent\":4,\"tt\":1,\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":100,\"ix\":11},\"r\":{\"a\":0,\"k\":0,\"ix\":10},\"p\":{\"a\":0,\"k\":[-477.544,144.518,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[109.544,123.944,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[107.527,107.527,100],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[0,0],[0,0],[0,0],[0,0]],\"o\":[[0,0],[0,0],[0,0],[0,0]],\"v\":[[34.611,123.694],[-34.611,123.694],[-34.611,-123.694],[34.611,-123.694]],\"c\":true},\"ix\":2},\"nm\":\"Path1\",\"mn\":\"ADBEVectorShape-Group\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,1,1,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill1\",\"mn\":\"ADBEVectorGraphic-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[184.227,123.944],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group1\",\"np\":2,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBEVectorGroup\",\"hd\":false},{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[0,0],[0,0],[0,0],[0,0]],\"o\":[[0,0],[0,0],[0,0],[0,0]],\"v\":[[34.611,123.694],[-34.611,123.694],[-34.611,-123.694],[34.611,-123.694]],\"c\":true},\"ix\":2},\"nm\":\"Path1\",\"mn\":\"ADBEVectorShape-Group\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,1,1,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill1\",\"mn\":\"ADBEVectorGraphic-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[34.861,123.944],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group2\",\"np\":2,\"cix\":2,\"bm\":0,\"ix\":2,\"mn\":\"ADBEVectorGroup\",\"hd\":false}],\"ip\":58,\"op\":182,\"st\":68,\"bm\":0},{\"ddd\":0,\"ind\":3,\"ty\":4,\"nm\":\"Body2\",\"td\":1,\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":100,\"ix\":11},\"r\":{\"a\":0,\"k\":0,\"ix\":10},\"p\":{\"a\":0,\"k\":[537.185,540.714,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[446.493,310.75,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[93,93,100],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[31.586,82.069],[31.25,11.224],[149.785,-16.119],[19.007,-22.353],[-28.863,-79.403],[-32.795,-10.753],[-55.849,29.309],[-9.987,21.439]],\"o\":[[-12.072,-31.3],[-53.362,-19.224],[-29.132,3.13],[-55.574,65.434],[11.842,32.508],[73.508,24.235],[20.698,-10.847],[36.867,-79.072]],\"v\":[[413.563,-225.974],[348.059,-288.974],[-318.079,-294.381],[-390.669,-255.819],[-408.84,221.141],[-342.132,285.905],[362.413,281.191],[409.376,233.773]],\"c\":true},\"ix\":2},\"nm\":\"Path1\",\"mn\":\"ADBEVectorShape-Group\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,0.156999999402,0.128999986836,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill1\",\"mn\":\"ADBEVectorGraphic-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[446.493,310.751],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group1\",\"np\":2,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBEVectorGroup\",\"hd\":false}],\"ip\":0,\"op\":91,\"st\":-36,\"bm\":0},{\"ddd\":0,\"ind\":4,\"ty\":4,\"nm\":\"Play\",\"parent\":3,\"tt\":1,\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":100,\"ix\":11},\"r\":{\"a\":0,\"k\":0,\"ix\":10},\"p\":{\"a\":1,\"k\":[{\"i\":{\"x\":0.891,\"y\":1},\"o\":{\"x\":0.901,\"y\":0},\"t\":58,\"s\":[477.209,314.656,0],\"to\":[97.5,0,0],\"ti\":[-97.5,0,0]},{\"t\":79,\"s\":[1062.209,314.656,0]}],\"ix\":2},\"a\":{\"a\":0,\"k\":[135.145,140.589,0],\"ix\":1},\"s\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.667,0.667,0.667],\"y\":[1,1,1]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0,0,0]},\"t\":-23,\"s\":[0,0,100]},{\"i\":{\"x\":[0.667,0.667,0.667],\"y\":[1,1,1]},\"o\":{\"x\":[0.892,0.892,0.333],\"y\":[-0.044,-0.044,0]},\"t\":-17,\"s\":[124,124,100]},{\"i\":{\"x\":[0.667,0.667,0.667],\"y\":[1,1,1]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0,0,0]},\"t\":-9,\"s\":[100,100,100]},{\"i\":{\"x\":[0.667,0.667,0.667],\"y\":[1,1,1]},\"o\":{\"x\":[0.167,0.167,0.167],\"y\":[0,0,0]},\"t\":14,\"s\":[0,0,100]},{\"i\":{\"x\":[0.667,0.667,0.667],\"y\":[1,1,1]},\"o\":{\"x\":[0.892,0.892,0.333],\"y\":[-0.044,-0.044,0]},\"t\":20,\"s\":[124,124,100]},{\"t\":28,\"s\":[100,100,100]}],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[0,0],[0,0],[0,0]],\"o\":[[0,0],[0,0],[0,0]],\"v\":[[-134.895,-140.339],[-134.895,140.339],[134.895,0.434]],\"c\":true},\"ix\":2},\"nm\":\"Path1\",\"mn\":\"ADBEVectorShape-Group\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,1,1,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill1\",\"mn\":\"ADBEVectorGraphic-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[135.145,140.589],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group1\",\"np\":2,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBEVectorGroup\",\"hd\":false}],\"ip\":14,\"op\":91,\"st\":-23,\"bm\":0},{\"ddd\":0,\"ind\":5,\"ty\":4,\"nm\":\"Pause\",\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":100,\"ix\":11},\"r\":{\"a\":0,\"k\":0,\"ix\":10},\"p\":{\"a\":0,\"k\":[540,548,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[109.544,123.944,0],\"ix\":1},\"s\":{\"a\":1,\"k\":[{\"i\":{\"x\":[0.824,0.824,0.667],\"y\":[1.015,1.015,1]},\"o\":{\"x\":[0.92,0.92,0.333],\"y\":[0,0,0]},\"t\":1,\"s\":[100,100,100]},{\"i\":{\"x\":[0.785,0.785,0.667],\"y\":[1,1,1]},\"o\":{\"x\":[0.892,0.892,0.333],\"y\":[0.006,0.006,0]},\"t\":9,\"s\":[124,124,100]},{\"t\":16,\"s\":[0,0,100]}],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[0,0],[0,0],[0,0],[0,0]],\"o\":[[0,0],[0,0],[0,0],[0,0]],\"v\":[[34.611,123.694],[-34.611,123.694],[-34.611,-123.694],[34.611,-123.694]],\"c\":true},\"ix\":2},\"nm\":\"Path1\",\"mn\":\"ADBEVectorShape-Group\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,1,1,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill1\",\"mn\":\"ADBEVectorGraphic-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[184.227,123.944],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group1\",\"np\":2,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBEVectorGroup\",\"hd\":false},{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[0,0],[0,0],[0,0],[0,0]],\"o\":[[0,0],[0,0],[0,0],[0,0]],\"v\":[[34.611,123.694],[-34.611,123.694],[-34.611,-123.694],[34.611,-123.694]],\"c\":true},\"ix\":2},\"nm\":\"Path1\",\"mn\":\"ADBEVectorShape-Group\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,1,1,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill1\",\"mn\":\"ADBEVectorGraphic-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[34.861,123.944],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group2\",\"np\":2,\"cix\":2,\"bm\":0,\"ix\":2,\"mn\":\"ADBEVectorGroup\",\"hd\":false}],\"ip\":0,\"op\":15,\"st\":-21,\"bm\":0},{\"ddd\":0,\"ind\":6,\"ty\":4,\"nm\":\"Body\",\"sr\":1,\"ks\":{\"o\":{\"a\":0,\"k\":100,\"ix\":11},\"r\":{\"a\":0,\"k\":0,\"ix\":10},\"p\":{\"a\":0,\"k\":[537.185,540.714,0],\"ix\":2},\"a\":{\"a\":0,\"k\":[446.493,310.75,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100,100],\"ix\":6}},\"ao\":0,\"shapes\":[{\"ty\":\"gr\",\"it\":[{\"ind\":0,\"ty\":\"sh\",\"ix\":1,\"ks\":{\"a\":0,\"k\":{\"i\":[[31.586,82.069],[31.25,11.224],[149.785,-16.119],[19.007,-22.353],[-28.863,-79.403],[-32.795,-10.753],[-55.849,29.309],[-9.987,21.439]],\"o\":[[-12.072,-31.3],[-53.362,-19.224],[-29.132,3.13],[-55.574,65.434],[11.842,32.508],[73.508,24.235],[20.698,-10.847],[36.867,-79.072]],\"v\":[[413.563,-225.974],[348.059,-288.974],[-318.079,-294.381],[-390.669,-255.819],[-408.84,221.141],[-342.132,285.905],[362.413,281.191],[409.376,233.773]],\"c\":true},\"ix\":2},\"nm\":\"Path1\",\"mn\":\"ADBEVectorShape-Group\",\"hd\":false},{\"ty\":\"fl\",\"c\":{\"a\":0,\"k\":[1,0.156999999402,0.128999986836,1],\"ix\":4},\"o\":{\"a\":0,\"k\":100,\"ix\":5},\"r\":1,\"bm\":0,\"nm\":\"Fill1\",\"mn\":\"ADBEVectorGraphic-Fill\",\"hd\":false},{\"ty\":\"tr\",\"p\":{\"a\":0,\"k\":[446.493,310.751],\"ix\":2},\"a\":{\"a\":0,\"k\":[0,0],\"ix\":1},\"s\":{\"a\":0,\"k\":[100,100],\"ix\":3},\"r\":{\"a\":0,\"k\":0,\"ix\":6},\"o\":{\"a\":0,\"k\":100,\"ix\":7},\"sk\":{\"a\":0,\"k\":0,\"ix\":4},\"sa\":{\"a\":0,\"k\":0,\"ix\":5},\"nm\":\"Transform\"}],\"nm\":\"Group1\",\"np\":2,\"cix\":2,\"bm\":0,\"ix\":1,\"mn\":\"ADBEVectorGroup\",\"hd\":false}],\"ip\":0,\"op\":91,\"st\":0,\"bm\":0}],\"markers\":[]}";

myapp::myapp() {
}

myapp::~myapp() {
}

void myapp::update_battery_status(powermanager *manager) {
    if (battery_label != NULL) {
        char post[6];
        auto p = manager->get_percent();
        auto ischarge = manager->is_charging();
        snprintf(post, sizeof(post), "%d %%", p);
        lv_label_set_text(battery_label, post);
        if (ischarge) {
            lv_obj_set_style_text_color(battery_label, lv_color_hex(0x00ff22), 0);
        } else {
            lv_obj_set_style_text_color(battery_label, lv_color_hex(0xffffff), 0);
        }
    }
}

void myapp::init_ui_elements() {
    auto screen = lv_scr_act();
    lottie_ani = lv_rlottie_create_from_raw(screen, 160, 160, lottiedata);
    lv_obj_center(lottie_ani);

    battery_label = lv_label_create(screen);
    static lv_style_t style_bat;
    lv_style_init(&style_bat);
    lv_style_set_text_font(&style_bat, &lv_font_montserrat_14);
    lv_style_set_text_color(&style_bat, lv_color_hex(0xffffff));
    lv_obj_add_style(battery_label, &style_bat, 0);
    lv_label_set_text(battery_label, "BAT");
    lv_obj_align(battery_label, LV_ALIGN_TOP_RIGHT, -20, 20);

    lv_obj_set_style_bg_color(screen, LV_COLOR_MAKE(0, 0, 0), LV_STATE_DEFAULT);
}

void myapp::pause_ani(){
    lv_rlottie_set_play_mode(lottie_ani, LV_RLOTTIE_CTRL_PAUSE);
}

void myapp::resume_ani(){
    const lv_rlottie_ctrl_t item =(lv_rlottie_ctrl_t)(8);
    lv_rlottie_set_play_mode(lottie_ani, item);
}